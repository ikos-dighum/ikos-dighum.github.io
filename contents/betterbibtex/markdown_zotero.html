<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.313">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Jacob Høigilt">
<meta name="dcterms.date" content="2023-01-01">

<title>Markdown with Zotero and Better Bibtex</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>


<script src="markdown_zotero_files/libs/clipboard/clipboard.min.js"></script>
<script src="markdown_zotero_files/libs/quarto-html/quarto.js"></script>
<script src="markdown_zotero_files/libs/quarto-html/popper.min.js"></script>
<script src="markdown_zotero_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="markdown_zotero_files/libs/quarto-html/anchor.min.js"></script>
<link href="markdown_zotero_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="markdown_zotero_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="markdown_zotero_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="markdown_zotero_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="markdown_zotero_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<style>html{ scroll-behavior: smooth; }</style>


</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#what-you-need" id="toc-what-you-need" class="nav-link active" data-scroll-target="#what-you-need">What you need</a></li>
  <li><a href="#creating-a-text-file." id="toc-creating-a-text-file." class="nav-link" data-scroll-target="#creating-a-text-file.">Creating a text file.</a></li>
  <li><a href="#exporting-a-library-from-zotero-to-your-text-file-directory." id="toc-exporting-a-library-from-zotero-to-your-text-file-directory." class="nav-link" data-scroll-target="#exporting-a-library-from-zotero-to-your-text-file-directory.">Exporting a library from Zotero to your text file directory.</a></li>
  <li><a href="#inserting-better-bibtex-references-in-markdown" id="toc-inserting-better-bibtex-references-in-markdown" class="nav-link" data-scroll-target="#inserting-better-bibtex-references-in-markdown">Inserting Better Bibtex references in Markdown</a></li>
  <li><a href="#compiling-the-.html.pdf.docx-file" id="toc-compiling-the-.html.pdf.docx-file" class="nav-link" data-scroll-target="#compiling-the-.html.pdf.docx-file">Compiling the .html/.pdf/.docx file</a></li>
  <li><a href="#specifying-a-citation-style" id="toc-specifying-a-citation-style" class="nav-link" data-scroll-target="#specifying-a-citation-style">Specifying a citation style</a></li>
  </ul>
</nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Markdown with Zotero and Better Bibtex</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Jacob Høigilt </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">January 1, 2023</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<section id="what-you-need" class="level2">
<h2 class="anchored" data-anchor-id="what-you-need">What you need</h2>
<ul>
<li>A text editor</li>
<li><a href="https://www.zotero.org/">Zotero</a> installed. Also install the Zotero plugin for your browser (Firefox, Chrome, Edge and Safari are supported)</li>
<li>The <a href="https://retorque.re/zotero-better-bibtex/installation/">Better Bibtex Zotero plugin</a> from Retorque - follow the installation instructions slavishly and use the default settings (one possible exception for Japanese, though)</li>
<li>You will also need to know ho to access the command line terminal. On a Mac, this is the Terminal. On Windows, it is the Command Prompt app, but even better for Windows users: download GitBash from UiO’s software center; it’s easier to use.</li>
<li>A really clear idea of where your files are. You need the text file and the bibliography file to be in the same directory for Better Bibtex and Markdown to work together. If you are not thoroughly familiar with the file structure on your computer, spend some time getting to know it.</li>
</ul>
</section>
<section id="creating-a-text-file." class="level2">
<h2 class="anchored" data-anchor-id="creating-a-text-file.">Creating a text file.</h2>
<p>We start by creating an .md file, for example zoterotutorial.md. In the YAML header, include the following elements:</p>
<pre><code>---
title: your title
author: you
bibliography: leave this empty for now, we will specify it later
---</code></pre>
<p>Write some sentences so you have some text where you can insert references.</p>
</section>
<section id="exporting-a-library-from-zotero-to-your-text-file-directory." class="level2">
<h2 class="anchored" data-anchor-id="exporting-a-library-from-zotero-to-your-text-file-directory.">Exporting a library from Zotero to your text file directory.</h2>
<p>First, make sure you remember where in the file system your new text file is.</p>
<p>Then open Zotero. If you have a library, fine. If not, make a small one. Go to any scholarly database (Google Scholar or your university library, for example) and simply choose the book/paper you want, then click the book/paper icon on the top right of your browser. The Zotero plugin then imports the reference into your library. After you have done this, right-click your library and choose “export library.”</p>
<p>If you have a big library, you will probably want to export just part of it, which you can do by right-clicking the relevant folder and choose “export collection”.</p>
<ul>
<li>Choose Better Bibtex in the scrollable menu.</li>
<li>If this is an ongoing project and you know your Zotero library is likely to expand, choose the “export in background” and “keep updated” options. This ensures that Zotero sends an updated bibliography file to your project folder every time you make a change.</li>
<li>Now comes the part where you choose <em>where</em> to export the file. <em>Choose the exact folder where your new .md file is located.</em></li>
<li>You now have a .bib file whose file name is the same as the name of the Zotero collection you exported. Go and check if it is in the right place.</li>
</ul>
</section>
<section id="inserting-better-bibtex-references-in-markdown" class="level2">
<h2 class="anchored" data-anchor-id="inserting-better-bibtex-references-in-markdown">Inserting Better Bibtex references in Markdown</h2>
<p>Let’s first look at how we write references. You use square brackets, an @ and then the citation key from Zotero (go to Zotero and copypaste a citation key you want to try). For the purposes of demonstration, I have included a paragraph from a paper I wrote recently. Here it is:</p>
<pre style="background: gray"><code>We still lack good explanations of the emergence and functions of CTs in Arabic
discourse. Although the literature on CTs sometimes includes Middle Eastern and
other non-Western contexts and experiences, e.g.
[@Butter2014;@Gurpinar2019;@Nefes2019;@Koerber2018], the fact remains that 20th-
and 21st-century Western Europe and the United States serve as the theoretical 
locus of CT studies. Other places and times are measured against the model 
developed from studies of modern Western countries and treated as interesting
variants. In an exemplary exercise of self-criticism, Butter and Knight
[@Butter2020b] state that current research is too focused on the USA and the
contemporary period, and too often treats CTs as coping mechanisms for the
marginalized. Our understanding of conspiracy discourse in the Arab Middle East 
is to a large degree framed by too much anecdotal evidence and too little 
research. The small body of scholarship on conspiracy theories in the Arab 
Middle East and North Africa has not kept up with developments in the literature 
the last 20 years. Of the two general, book-length studies that exist, one tends
more towards paternalistic polemic than scholarship [@Pipes1996]. The other is
serious and useful, but it treats the Arab public sphere as an extraordinary 
case and focuses only on post-World War 2 history. A more fundamental problem is
that it does not examine sources in Arabic and thus cannot provide a complete
understanding of the phenomenon [@Gray2010]. There are valuable, smaller studies 
on CTs in relation to specific issues. In the tradition of conspiracy research 
in cultural studies, Koerber contributes a study of conspiracy in Egyptian
literature [@Koerber2018]. De Poli provides an excellent investigation of how
anti-Semitic ideas, specifically those of the fabricated *Protocols of the 
Elders of Zion*, were injected into the Arabic public sphere through
French-influenced Catholicism and, later, Nazi agents [@DePoli2014]. Other 
studies include conspiracy theories in civil war [@Silverstein2002], ideological 
struggles and sectarianism [@Farha2016].</code></pre>
<p>When it is compiled to .html format, it will look like the paragraph below, and a list of references will be added at the bottom of the document (take a look at the end of this text to see it). That’s the magic!</p>
<p>We still lack good explanations of the emergence and functions of CTs in Arabic discourse. Although the literature on CTs sometimes includes Middle Eastern and other non-Western contexts and experiences, e.g. <span class="citation" data-cites="Butter2014 Gurpinar2019 Nefes2019 Koerber2018">(<a href="#ref-Butter2014" role="doc-biblioref">Butter and Reinkowski, 2014</a>; <a href="#ref-Koerber2018" role="doc-biblioref">Koerber, 2018</a>; <a href="#ref-Nefes2019" role="doc-biblioref">Nefes, 2019</a>; <a href="#ref-Gurpinar2019" role="doc-biblioref">Gürpınar, 2019</a>)</span>, the fact remains that 20th- and 21st-century Western Europe and the United States serve as the theoretical locus of CT studies. Other places and times are measured against the model developed from studies of modern Western countries and treated as interesting variants. In an exemplary exercise of self-criticism, Butter and Knight <span class="citation" data-cites="Butter2020b">(<a href="#ref-Butter2020b" role="doc-biblioref">Butter and Knight, 2020</a>)</span> state that current research is too focused on the USA and the contemporary period, and too often treats CTs as coping mechanisms for the marginalized. Our understanding of conspiracy discourse in the Arab Middle East is to a large degree framed by too much anecdotal evidence and too little research. The small body of scholarship on conspiracy theories in the Arab Middle East and North Africa has not kept up with developments in the literature the last 20 years. Of the two general, book-length studies that exist, one tends more towards paternalistic polemic than scholarship <span class="citation" data-cites="Pipes1996">(<a href="#ref-Pipes1996" role="doc-biblioref">Pipes, 1996</a>)</span>. The other is serious and useful, but it treats the Arab public sphere as an extraordinary case and focuses only on post-World War 2 history. A more fundamental problem is that it does not examine sources in Arabic and thus cannot provide a complete understanding of the phenomenon <span class="citation" data-cites="Gray2010">(<a href="#ref-Gray2010" role="doc-biblioref">Gray, 2010</a>)</span>. There are valuable, smaller studies on CTs in relation to specific issues. In the tradition of conspiracy research in cultural studies, Koerber contributes a study of conspiracy in Egyptian literature <span class="citation" data-cites="Koerber2018">(<a href="#ref-Koerber2018" role="doc-biblioref">Koerber, 2018</a>)</span>. De Poli provides an excellent investigation of how anti-Semitic ideas, specifically those of the fabricated <em>Protocols of the Elders of Zion</em>, were injected into the Arabic public sphere through French-influenced Catholicism and, later, Nazi agents <span class="citation" data-cites="DePoli2014">(<a href="#ref-DePoli2014" role="doc-biblioref">De Poli, 2014</a>)</span>. Other studies include conspiracy theories in civil war <span class="citation" data-cites="Silverstein2002">(<a href="#ref-Silverstein2002" role="doc-biblioref">Silverstein, 2002</a>)</span>, ideological struggles and sectarianism <span class="citation" data-cites="Farha2016">(<a href="#ref-Farha2016" role="doc-biblioref">Farha, 2016</a>)</span>.</p>
<p><br>
<br>
</p>
<p>For this to work, we need to fill out the bibliography field in the YAML header. The filename of my bibliography in this example is conspiracies.bib. You can check your own filename in the folder you saved the bibliography file to. Write the full filename <em>exactly as it appears</em> (YAML is case sensitive).</p>
<p>This YAML field tells Pandoc that it should get the references you have included in your markdown text from this file.</p>
</section>
<section id="compiling-the-.html.pdf.docx-file" class="level2">
<h2 class="anchored" data-anchor-id="compiling-the-.html.pdf.docx-file">Compiling the .html/.pdf/.docx file</h2>
<p>Now for the finish!</p>
<ul>
<li><p>Save your .md file so you are certain the last changes you made are included.</p></li>
<li><p>Open the terminal <em>in the same directory as your .md file and .bib files are</em>.</p></li>
<li><p>Give Pandoc the following command:</p>
<pre><code>pandoc --filter pandoc-citeproc -s yourfilename.md -o yourfilename.html</code></pre>
<p>OR (on Mac/Windows)</p>
<pre><code>pandoc --citeproc -s yourfilename.md -o yourfilename.html</code></pre></li>
</ul>
<p>Now try it out with different file formats. For pdf to work, you must have installed a Latex package (tinytex or Texlive).</p>
<p><em>NOTE</em> If you have non-Latin characters in your .bib file you may run into the problem that the citation key converts your non-Latin letters to a strange symbol which hinders the pandoc process. The only solution I have for this currently is to open the resulting .bib file in a text editor, and then run a “find and replace” command on the symbol, replacing it by nothing. It then disappears, but the affected citation keys will miss one letter. I will look for better solutions to this.</p>
</section>
<section id="specifying-a-citation-style" class="level2">
<h2 class="anchored" data-anchor-id="specifying-a-citation-style">Specifying a citation style</h2>
<p>This is <em>extremely</em> useful. You can convert the references and bibliography to almost any style. Here is the relevant section from the <a href="https://pandoc.org/MANUAL.html#citations">Pandoc user guide</a>:</p>
<blockquote class="blockquote">
<p>Citations and references can be formatted using any style supported by the Citation Style Language (csl), listed in the Zotero Style Repository. These files are specified using the –csl option or the csl (or citation-style) metadata field. By default, pandoc will use the Chicago Manual of Style author-date format. (You can override this default by copying a CSL style of your choice to default.csl in your user data directory.) The CSL project provides further information on finding and editing styles.</p>
</blockquote>
<p>So if you want to specify a citation style, you download the corresponding .csl style from the Zotero style repository and <em>place it in the directory where your text file is</em>, and then you include it in the YAML header:</p>
<pre><code>---
bibliography: yourbibfile
csl: digital-scholarship-in-the-humanities.csl
---</code></pre>

</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" role="doc-bibliography"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body" role="doc-bibliography">
<div id="ref-Butter2020b" class="csl-entry" role="doc-biblioentry">
<strong>Butter, M. and Knight, P. (eds)</strong> (2020). <em>Routledge <span>Handbook</span> of <span>Conspiracy Theories</span></em>. 1st edition. <span>Routledge</span>.
</div>
<div id="ref-Butter2014" class="csl-entry" role="doc-biblioentry">
<strong>Butter, M.</strong> and <strong>Reinkowski, M.</strong> (2014). <em>Conspiracy <span>Theories</span> in the <span>United States</span> and the <span>Middle East</span>: <span>A Comparative Approach</span></em>. <span>Walter de Gruyter</span>.
</div>
<div id="ref-DePoli2014" class="csl-entry" role="doc-biblioentry">
<strong>De Poli, B.</strong> (2014). The <span>Judeo-Masonic Conspiracy</span>: <span>The Path</span> from the <span>Cemetery</span> of <span>Prague</span> to <span>Arab Anti-Zionist Propaganda</span>. In Butter, M. and Reinkowski, M. (eds), <em>Conspiracy <span>Theories</span> in the <span>United States</span> and the <span>Middle East</span>: <span>A Comparative Approach</span></em>. <span>Berlin; Boston</span>: <span>Walter de Gruyter</span>, pp. 251–71.
</div>
<div id="ref-Farha2016" class="csl-entry" role="doc-biblioentry">
<strong>Farha, M.</strong> (2016). Searching for <span>Sectarianism</span> in the <span>Arab Spring</span>: <span>Colonial Conspiracy</span> or <span>Indigenous Instinct</span>? <em>The Muslim World</em>, <strong>106</strong>(1), pp. 8–61. <a href="https://doi.org/10.1111/muwo.12137">10.1111/muwo.12137</a>.
</div>
<div id="ref-Gray2010" class="csl-entry" role="doc-biblioentry">
<strong>Gray, M.</strong> (2010). <em>Conspiracy Theories in the <span>Arab</span> World: Sources and Politics</em>. <span>New York, NY</span>: <span>Routledge</span>.
</div>
<div id="ref-Gurpinar2019" class="csl-entry" role="doc-biblioentry">
<strong>Gürpınar, D.</strong> (2019). <em>Conspiracy <span>Theories</span> in <span>Turkey</span>: <span>Conspiracy Nation</span></em>. <span>Routledge</span>.
</div>
<div id="ref-Koerber2018" class="csl-entry" role="doc-biblioentry">
<strong>Koerber, B.</strong> (2018). <em>Conspiracy in <span>Modern Egyptian Literature</span></em>. <span>Edinburgh University Press</span>.
</div>
<div id="ref-Nefes2019" class="csl-entry" role="doc-biblioentry">
<strong>Nefes, T. S.</strong> (2019). The <span>Conspiratorial Style</span> in <span>Turkish Politics</span>. In Uscinski, J.E. (ed.), <em>Conspiracy Theories and the People Who Believe Them</em>. <span>New York, NY</span>: <span>Oxford University Press</span>, pp. 385–94.
</div>
<div id="ref-Pipes1996" class="csl-entry" role="doc-biblioentry">
<strong>Pipes, D.</strong> (1996). <em>The <span>Hidden Hand</span>: <span>Middle East Fears</span> of <span>Conspiracy</span></em>. <span>Palgrave Macmillan</span>.
</div>
<div id="ref-Silverstein2002" class="csl-entry" role="doc-biblioentry">
<strong>Silverstein, P. A.</strong> (2002). An <span>Excess</span> of <span>Truth</span>: <span>Violence</span>, <span>Conspiracy Theorizing</span> and the <span>Algerian Civil War</span>. <em>Anthropological Quarterly</em>, <strong>75</strong>(4), pp. 643–74.
</div>
</div></section></div></main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



<script src="markdown_zotero_files/libs/quarto-html/zenscroll-min.js"></script>
</body></html>